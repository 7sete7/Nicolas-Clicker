{"mappings":"MAEe,MAAAA,EACdC,KAAe,EACfC,MAAgB,EAKLC,WACV,OAAOC,KAAKF,MAGFG,UACV,OAAOD,KAAKH,KAGbK,cAAqBC,GACpBH,KAAKF,OAASK,EAGfC,aAAoBD,GACnBH,KAAKH,MAAQM,EAGdE,QACCL,KAAKM,YAAcC,SAASC,eAAe,QAC3CR,KAAKS,WAAaF,SAASC,eAAe,OAG3CE,OAAOC,GACFX,KAAKC,IAAM,GACdD,KAAKE,cAAcF,KAAKC,IAAMU,GAIhCC,SACCZ,KAAKM,YAAYO,UAAYb,KAAKD,KAAKe,QAAQ,GAC/Cd,KAAKS,WAAWI,UAAYE,OAAOf,KAAKC,M,ICxB1Ce,EAdA,MACCC,MAA+C,GAE/CC,QAAeC,EAAcC,GAC5BpB,KAAKiB,MAAME,IAASnB,KAAKiB,MAAME,IAAS,IAAIE,OAAOD,GAGpDE,SAAgBH,GACXnB,KAAKiB,MAAME,IACdnB,KAAKiB,MAAME,GAAMI,SAAQH,GAAMA,Q,IC0BlCI,EA/BA,MACCC,IAAc,GAGdC,OAAgB,IAAIV,EACpBW,OAAiB,IAAI/B,EAEjBgC,YACH,OAAO5B,KAAK2B,OAGbtB,QACCL,KAAK2B,OAAOtB,QAEZL,KAAK6B,YAAcC,aAAY,KAC9B9B,KAAKU,SACLqB,YAAW,IAAM/B,KAAKY,UAAU,KAC9B,IAAOZ,KAAKyB,KAGhBf,SACC,MAAMC,EAAQ,EAAIX,KAAKyB,IAEvBzB,KAAK2B,OAAOjB,OAAOC,GAGpBC,SACCZ,KAAK2B,OAAOf,WC3BdoB,QAAQC,IAAI,SACZ,MAAMC,EAAa,IAAIV,EACvBU,EAAK7B,QAEiBE,SAASC,eAAe,YAChC2B,iBAAiB,SAAS,KACvCD,EAAKN,MAAM1B,cAAc,MAO1B,MAAMkC,EAA2C,CAChDC,KAAM,CACLpC,IAAK,EACLqC,IAAK,IAIDC,EAAWhC,SAASC,eAAe,aAAagC,iBAAiB,YACvED,GAAUhB,SAAQkB,IACjB,MAAMC,EAAUD,EACVtB,EAAOuB,EAAQC,QAAQxB,KACvByB,EAAaF,EAAQG,cAAc,aAEzCH,EAAQP,iBAAiB,SAAS,KACjC,GAA2B,MAAvBC,EAAcjB,GAAe,OAEjCiB,EAAcjB,GAAMmB,KAAO,EAC3B,MAAMQ,EAASV,EAAcjB,GAE7Be,EAAKN,MAAMxB,aAAa0C,EAAO7C,KAE3B2C,IAAYA,EAAWG,UAAYhC,OAAO+B,EAAOR,a","sources":["src/components/money.ts","src/lib/EventManager.ts","src/lib/Game.ts","src/index.ts"],"sourcesContent":["import GameComponent from '../types/GameComponent';\n\nexport default class Money implements GameComponent {\n\tprivate _nps = 0;\n\tprivate _nics = 0;\n\n\tprivate nicsElement!: HTMLElement;\n\tprivate npsElement!: HTMLElement;\n\n\tpublic get nics() {\n\t\treturn this._nics;\n\t}\n\n\tpublic get nps() {\n\t\treturn this._nps;\n\t}\n\n\tpublic incrementNics(amount: number) {\n\t\tthis._nics += amount;\n\t}\n\n\tpublic incrementNps(amount: number) {\n\t\tthis._nps += amount;\n\t}\n\n\tstart(): void {\n\t\tthis.nicsElement = document.getElementById('nics') as HTMLDivElement;\n\t\tthis.npsElement = document.getElementById('nps') as HTMLDivElement;\n\t}\n\n\tupdate(delta: number) {\n\t\tif (this.nps > 0) {\n\t\t\tthis.incrementNics(this.nps * delta);\n\t\t}\n\t}\n\n\trender() {\n\t\tthis.nicsElement.innerText = this.nics.toFixed(1);\n\t\tthis.npsElement.innerText = String(this.nps);\n\t}\n}\n","class EventManager {\n\tprivate store: { [key: string]: Function[] } = {};\n\n\tpublic observe(name: string, fn: Function) {\n\t\tthis.store[name] = (this.store[name] || []).concat(fn);\n\t}\n\n\tpublic dispatch(name: string) {\n\t\tif (this.store[name]) {\n\t\t\tthis.store[name].forEach(fn => fn());\n\t\t}\n\t}\n}\n\nexport default EventManager;\n","import Money from '../components/money';\nimport GameComponent from '../types/GameComponent';\nimport EventManager from './EventManager';\n\nclass Game implements GameComponent {\n\tprivate FPS = 30;\n\tprivate _intervalId?: NodeJS.Timer;\n\n\tpublic events = new EventManager();\n\tprivate _money = new Money();\n\n\tget money(): Money {\n\t\treturn this._money;\n\t}\n\n\tstart(): void {\n\t\tthis._money.start();\n\n\t\tthis._intervalId = setInterval(() => {\n\t\t\tthis.update();\n\t\t\tsetTimeout(() => this.render(), 1);\n\t\t}, 1000 / this.FPS);\n\t}\n\n\tupdate() {\n\t\tconst delta = 1 / this.FPS; // In seconds\n\n\t\tthis._money.update(delta);\n\t}\n\n\trender() {\n\t\tthis._money.render();\n\t}\n}\n\nexport default Game;\n","/// <reference lib=\"dom\" />\n\nimport Game from './lib/Game';\n\nconsole.log('START');\nconst game: Game = new Game();\ngame.start();\n\nconst headContainer = document.getElementById('nic-head') as HTMLDivElement;\nheadContainer.addEventListener('click', () => {\n\tgame.money.incrementNics(1);\n});\n\ninterface config {\n\tnps: number;\n\tqtt: number;\n}\nconst upgradeConfig: { [key: string]: config } = {\n\tcage: {\n\t\tnps: 3,\n\t\tqtt: 0,\n\t},\n};\n\nconst upgrades = document.getElementById('upgrades')?.querySelectorAll('.upgrade');\nupgrades?.forEach(_upgrade => {\n\tconst upgrade = _upgrade as HTMLDivElement;\n\tconst name = upgrade.dataset.name as string;\n\tconst qttElement = upgrade.querySelector('.quantity');\n\n\tupgrade.addEventListener('click', () => {\n\t\tif (upgradeConfig[name] == null) return;\n\n\t\tupgradeConfig[name].qtt += 1;\n\t\tconst config = upgradeConfig[name];\n\n\t\tgame.money.incrementNps(config.nps);\n\n\t\tif (qttElement) qttElement.innerHTML = String(config.qtt);\n\t});\n});\n"],"names":["$d7d13bd15208ef27$export$2e2bcd8739ae039","_nps","_nics","nics","this","nps","incrementNics","amount","incrementNps","start","nicsElement","document","getElementById","npsElement","update","delta","render","innerText","toFixed","String","$185cd28de9934687$export$2e2bcd8739ae039","store","observe","name","fn","concat","dispatch","forEach","$4974df465c41ef8c$export$2e2bcd8739ae039","FPS","events","_money","money","_intervalId","setInterval","setTimeout","console","log","$cbde19d326c8c1cc$var$game","addEventListener","$cbde19d326c8c1cc$var$upgradeConfig","cage","qtt","$cbde19d326c8c1cc$var$upgrades","querySelectorAll","_upgrade","upgrade","dataset","qttElement","querySelector","config","innerHTML"],"version":3,"file":"index.c38f2a61.js.map","sourceRoot":"../"}